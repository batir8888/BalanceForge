# BalanceForge

**BalanceForge** ‚Äî –º–æ—â–Ω—ã–π Unity-–ø–ª–∞–≥–∏–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—á–Ω—ã–º–∏ –∏–≥—Ä–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (balance tables). –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π: undo/redo, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –≤ CSV.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–¢–∞–±–ª–∏—á–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ** —Å—Ç—Ä–æ–∫
- **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏**: Ctrl+C/V/Z/Y, Delete

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
- **Undo/Redo** –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ (AND/OR)
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** –ø–æ –ª—é–±–æ–π –∫–æ–ª–æ–Ω–∫–µ
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –¥–∞–Ω–Ω—ã—Ö —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- **–ë—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞** (Copy/Paste)

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ: `String`, `Integer`, `Float`, `Boolean`
- Unity —Ç–∏–ø—ã: `Vector2`, `Vector3`, `Color`
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ: `Enum`, `AssetReference`

### –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç
- **CSV —ç–∫—Å–ø–æ—Ä—Ç** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **CSV –∏–º–ø–æ—Ä—Ç** —Å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –º–∞—Å—Ç–µ—Ä
```
Assets ‚Üí Create ‚Üí BalanceForge ‚Üí Balance Table Wizard
```
1. –í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ç–∞–±–ª–∏—Ü—ã
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–ª–æ–Ω–∫–∏ (–∏–º—è, —Ç–∏–ø, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
3. –ù–∞–∂–º–∏—Ç–µ "Create Table"

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –º–µ–Ω—é
```
Assets ‚Üí Create ‚Üí BalanceForge ‚Üí Balance Table
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
```
Window ‚Üí BalanceForge ‚Üí Table Editor
```
–ò–ª–∏ –¥–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ `.asset` —Ñ–∞–π–ª —Ç–∞–±–ª–∏—Ü—ã.

---

## –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

## 1. Core.Data - –Ø–¥—Ä–æ –¥–∞–Ω–Ω—ã—Ö

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã

#### BalanceTable (ScriptableObject)
–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
```csharp
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
var table = ScriptableObject.CreateInstance<BalanceTable>();
table.TableName = "Characters";

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏
var column = new ColumnDefinition("name", "Character Name", ColumnType.String, required: true);
table.AddColumn(column);

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
var row = table.AddRow();
row.SetValue("name", "Hero");

// –í–∞–ª–∏–¥–∞—Ü–∏—è
ValidationResult result = table.ValidateData();
if (!result.IsValid) {
    foreach (var error in result.Errors) {
        Debug.LogError(error.Message);
    }
}
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
| –°–≤–æ–π—Å—Ç–≤–æ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `TableName` | `string` | –ò–º—è —Ç–∞–±–ª–∏—Ü—ã |
| `TableId` | `string` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (GUID) |
| `Columns` | `List<ColumnDefinition>` | –°–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫ |
| `Rows` | `List<BalanceRow>` | –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ |
| `LastModified` | `DateTime` | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è |

**–ú–µ—Ç–æ–¥—ã:**
- `AddColumn(ColumnDefinition)` - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É
- `RemoveColumn(string)` - –£–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É –ø–æ ID
- `AddRow()` - –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- `RemoveRow(string)` - –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ ID
- `GetRow(int)` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ –∏–Ω–¥–µ–∫—Å—É
- `GetColumn(string)` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É –ø–æ ID
- `ValidateData()` - –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
- `HasStructure(List<string>)` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

#### BalanceRow
–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
var row = new BalanceRow();

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π
row.SetValue("health", 100);
row.SetValue("damage", 25.5f);
row.SetValue("isActive", true);
row.SetValue("position", new Vector3(10, 0, 5));

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
int health = (int)row.GetValue("health");
Vector3 pos = (Vector3)row.GetValue("position");

// –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
var clonedRow = row.Clone();
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Unity
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –î–≤–æ–π–Ω–æ–π —Å–ª–æ–≤–∞—Ä—å (runtime + serialized)
- Timestamp —Å–æ–∑–¥–∞–Ω–∏—è

---

#### üî∑ ColumnDefinition
–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ —Ç–∞–±–ª–∏—Ü—ã.

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏:**
```csharp
// –ü—Ä–æ—Å—Ç–∞—è –∫–æ–ª–æ–Ω–∫–∞
var nameCol = new ColumnDefinition(
    id: "char_name",
    name: "Character Name",
    type: ColumnType.String,
    required: true,
    defaultValue: "Unnamed"
);

// –ö–æ–ª–æ–Ω–∫–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
var healthCol = new ColumnDefinition("health", "HP", ColumnType.Integer, true, 100);
healthCol.Validator = new RangeValidator(0, 1000);

// Enum –∫–æ–ª–æ–Ω–∫–∞
var rarityCol = new ColumnDefinition("rarity", "Rarity", ColumnType.Enum);
rarityCol.EnumDefinition.AddValue("Common");
rarityCol.EnumDefinition.AddValue("Rare");
rarityCol.EnumDefinition.AddValue("Epic");
rarityCol.EnumDefinition.AddValue("Legendary");

// Asset Reference –∫–æ–ª–æ–Ω–∫–∞
var prefabCol = new ColumnDefinition("prefab", "Prefab", ColumnType.AssetReference);
prefabCol.SetAssetType(typeof(GameObject));
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
| –°–≤–æ–π—Å—Ç–≤–æ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `ColumnId` | `string` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–æ–ª–æ–Ω–∫–∏ |
| `DisplayName` | `string` | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è |
| `DataType` | `ColumnType` | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö |
| `IsRequired` | `bool` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è |
| `DefaultValue` | `object` | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| `EnumDefinition` | `EnumDefinition` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ enum (–µ—Å–ª–∏ —Ç–∏–ø Enum) |
| `Validator` | `IValidator` | –í–∞–ª–∏–¥–∞—Ç–æ—Ä –∑–Ω–∞—á–µ–Ω–∏–π |

---

#### ColumnType (enum)
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.

```csharp
public enum ColumnType
{
    String,           // –¢–µ–∫—Å—Ç
    Integer,          // –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
    Float,            // –î—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
    Boolean,          // true/false
    Enum,             // –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ
    AssetReference,   // –°—Å—ã–ª–∫–∞ –Ω–∞ Unity Asset
    Color,            // –¶–≤–µ—Ç (Unity Color)
    Vector2,          // 2D –≤–µ–∫—Ç–æ—Ä
    Vector3           // 3D –≤–µ–∫—Ç–æ—Ä
}
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```csharp
// String
row.SetValue("description", "Powerful sword");

// Integer
row.SetValue("level", 10);

// Float
row.SetValue("critChance", 0.25f);

// Boolean
row.SetValue("isUnlocked", true);

// Enum
row.SetValue("rarity", "Legendary");

// AssetReference
GameObject prefab = Resources.Load<GameObject>("Prefabs/Sword");
row.SetValue("prefab", prefab);

// Color
row.SetValue("tint", Color.red);

// Vector2
row.SetValue("gridPosition", new Vector2(5, 3));

// Vector3
row.SetValue("spawnPoint", new Vector3(10, 0, -5));
```

---

#### SerializableDictionary<TKey, TValue>
–°–ª–æ–≤–∞—Ä—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Unity —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ü—Ä–æ–±–ª–µ–º–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ Dictionary:**
```csharp
// ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢ —Å Unity —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
[SerializeField] private Dictionary<string, int> data;
```

**–†–µ—à–µ–Ω–∏–µ:**
```csharp
// ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
[SerializeField] private SerializableDictionary<string, int> data;
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```csharp
// –ü—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Unity –≤—ã–∑—ã–≤–∞–µ—Ç:
OnBeforeSerialize() {
    keys.Clear();
    values.Clear();
    foreach (var kvp in this) {
        keys.Add(kvp.Key);
        values.Add(kvp.Value);
    }
}

// –ü—Ä–∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
OnAfterDeserialize() {
    Clear();
    for (int i = 0; i < keys.Count; i++) {
        this[keys[i]] = values[i];
    }
}
```

---

#### ValidationResult & ValidationError
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
ValidationResult result = table.ValidateData();

if (result.IsValid) {
    Debug.Log("All data is valid!");
} else {
    Debug.LogWarning($"Found {result.Errors.Count} errors:");
    
    foreach (var error in result.Errors) {
        Debug.LogError($"Row: {error.RowId}, Column: {error.ColumnId}");
        Debug.LogError($"Message: {error.Message}");
        Debug.LogError($"Severity: {error.Severity}");
    }
}
```

**Severity —É—Ä–æ–≤–Ω–∏:**
```csharp
public enum ErrorSeverity
{
    Warning,   // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
    Error,     // –û—à–∏–±–∫–∞ (–Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª)
    Critical   // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
}
```

---

## 2. Data.Operations - –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã.

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

#### IFilter (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
–ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤.

```csharp
public interface IFilter
{
    List<BalanceRow> Apply(List<BalanceRow> rows);
}
```

---

#### ColumnFilter
–ü—Ä–æ—Å—Ç–æ–π —Ñ–∏–ª—å—Ç—Ä –ø–æ –æ–¥–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
// –ù–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å —É—Ä–æ–≤–Ω–µ–º > 10
var condition = new FilterCondition {
    ColumnId = "level",
    Operator = FilterOperator.GreaterThan,
    Value = 10
};

var filter = new ColumnFilter(condition);
var filtered = filter.Apply(table.Rows);
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:**
```csharp
public enum FilterOperator
{
    Equals,        // ==
    NotEquals,     // !=
    GreaterThan,   // >
    LessThan,      // <
    Contains,      // substring search
    StartsWith,    // –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å
    EndsWith       // –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞
}
```

---

#### CompositeFilter
–ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä (AND/OR –ª–æ–≥–∏–∫–∞).

**–ü—Ä–∏–º–µ—Ä - AND –ª–æ–≥–∏–∫–∞:**
```csharp
// –ù–∞–π—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: level > 10 –ò rarity == "Epic"
var composite = new CompositeFilter(LogicalOperator.And);

composite.AddFilter(new ColumnFilter(new FilterCondition {
    ColumnId = "level",
    Operator = FilterOperator.GreaterThan,
    Value = 10
}));

composite.AddFilter(new ColumnFilter(new FilterCondition {
    ColumnId = "rarity",
    Operator = FilterOperator.Equals,
    Value = "Epic"
}));

var result = composite.Apply(table.Rows);
```

**–ü—Ä–∏–º–µ—Ä - OR –ª–æ–≥–∏–∫–∞:**
```csharp
// –ù–∞–π—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: rarity == "Epic" –ò–õ–ò rarity == "Legendary"
var composite = new CompositeFilter(LogicalOperator.Or);

composite.AddFilter(new ColumnFilter(new FilterCondition {
    ColumnId = "rarity",
    Operator = FilterOperator.Equals,
    Value = "Epic"
}));

composite.AddFilter(new ColumnFilter(new FilterCondition {
    ColumnId = "rarity",
    Operator = FilterOperator.Equals,
    Value = "Legendary"
}));

var result = composite.Apply(table.Rows);
```

**–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
```csharp
// (level > 10 AND damage > 50) OR (isUnlocked == false)
var mainFilter = new CompositeFilter(LogicalOperator.Or);

var andFilter = new CompositeFilter(LogicalOperator.And);
andFilter.AddFilter(levelFilter);
andFilter.AddFilter(damageFilter);

mainFilter.AddFilter(andFilter);
mainFilter.AddFilter(unlockedFilter);
```

---

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

#### TableSorter
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–º–µ–Ω–∏ (–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ)
var sorted = TableSorter.Sort(
    rows: table.Rows,
    columnId: "name",
    direction: SortDirection.Ascending,
    columnType: ColumnType.String
);

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—é (—É–±—ã–≤–∞–Ω–∏–µ)
var sortedByLevel = TableSorter.Sort(
    rows: table.Rows,
    columnId: "level",
    direction: SortDirection.Descending,
    columnType: ColumnType.Integer
);
```

**–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:**
```csharp
public enum SortDirection
{
    None,        // –ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    Ascending,   // –ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é ‚ñ≤
    Descending   // –ü–æ —É–±—ã–≤–∞–Ω–∏—é ‚ñº
}
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `Array.Sort` –≤–º–µ—Å—Ç–æ LINQ (–≤ 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ)
- –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
- –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ null –∑–Ω–∞—á–µ–Ω–∏–π

---

#### SortingState
–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
var state = new SortingState();

// –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫: None ‚Üí Ascending
state.Toggle("level");
Debug.Log(state.Direction); // Ascending

// –í—Ç–æ—Ä–æ–π –∫–ª–∏–∫: Ascending ‚Üí Descending
state.Toggle("level");
Debug.Log(state.Direction); // Descending

// –¢—Ä–µ—Ç–∏–π –∫–ª–∏–∫: Descending ‚Üí None
state.Toggle("level");
Debug.Log(state.Direction); // None

// –ö–ª–∏–∫ –ø–æ –¥—Ä—É–≥–æ–π –∫–æ–ª–æ–Ω–∫–µ: —Å–±—Ä–æ—Å + Ascending
state.Toggle("name");
Debug.Log(state.Direction); // Ascending
```

---

## 3. Services - –°–µ—Ä–≤–∏—Å—ã

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏, undo/redo –∏ —Ä–∞–±–æ—Ç—ã —Å –±—É—Ñ–µ—Ä–æ–º –æ–±–º–µ–Ω–∞.

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### IValidator (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
```csharp
public interface IValidator
{
    bool Validate(object value);
    string GetErrorMessage();
}
```

---

#### RangeValidator
–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
// HP –æ—Ç 0 –¥–æ 1000
var healthValidator = new RangeValidator(0, 1000);
column.Validator = healthValidator;

// –ü—Ä–æ–≤–µ—Ä–∫–∞
bool valid = healthValidator.Validate(500);  // true
valid = healthValidator.Validate(1500);      // false
```

---

#### RegexValidator
–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é.

**–ü—Ä–∏–º–µ—Ä—ã:**
```csharp
// Email
var emailValidator = new RegexValidator(@"^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$");

// –¢–µ–ª–µ—Ñ–æ–Ω (—Ñ–æ—Ä–º–∞—Ç +X-XXX-XXX-XXXX)
var phoneValidator = new RegexValidator(@"^\+\d{1}-\d{3}-\d{3}-\d{4}$");

// –¢–æ–ª—å–∫–æ –±—É–∫–≤—ã –∏ –ø—Ä–æ–±–µ–ª—ã
var nameValidator = new RegexValidator(@"^[a-zA-Z\s]+$");

// IP –∞–¥—Ä–µ—Å
var ipValidator = new RegexValidator(
    @"^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}" +
    @"(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
);
```

---

#### RequiredValidator
–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π.

```csharp
var validator = new RequiredValidator();
column.Validator = validator;

// –ü—Ä–æ–≤–µ—Ä–∫–∞
validator.Validate("Some text");  // true
validator.Validate("");           // false
validator.Validate(null);         // false
```

---

### Undo/Redo —Å–∏—Å—Ç–µ–º–∞

#### UndoRedoService
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
var undoRedo = new UndoRedoService();

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
var command = new EditCellCommand(table, rowId, columnId, oldValue, newValue);
undoRedo.ExecuteCommand(command);

// –û—Ç–º–µ–Ω–∞
if (undoRedo.CanUndo()) {
    undoRedo.Undo();
}

// –ü–æ–≤—Ç–æ—Ä
if (undoRedo.CanRedo()) {
    undoRedo.Redo();
}

// –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
undoRedo.Clear();
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      UndoRedoService             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  undoStack: Stack<ICommand>      ‚îÇ ‚Üê –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–º–µ–Ω
‚îÇ  redoStack: Stack<ICommand>      ‚îÇ ‚Üê –ò—Å—Ç–æ—Ä–∏—è –ø–æ–≤—Ç–æ—Ä–æ–≤
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

#### ICommand (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
–ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–æ–º–∞–Ω–¥.

```csharp
public interface ICommand
{
    void Execute();           // –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
    void Undo();             // –û—Ç–º–µ–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
    string GetDescription(); // –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
}
```

---

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**AddRowCommand** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
```csharp
var row = table.AddRow();
var command = new AddRowCommand(table, row);
undoRedo.ExecuteCommand(command);
```

**EditCellCommand** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —è—á–µ–π–∫–∏
```csharp
var oldValue = row.GetValue("health");
var newValue = 150;
var command = new EditCellCommand(table, rowId, "health", oldValue, newValue);
undoRedo.ExecuteCommand(command);
```

**DeleteRowCommand** - –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
```csharp
var command = new DeleteRowCommand(table, row);
undoRedo.ExecuteCommand(command);
```

**MultiDeleteCommand** - –£–¥–∞–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫
```csharp
var rowsToDelete = new List<BalanceRow> { row1, row2, row3 };
var command = new MultiDeleteCommand(table, rowsToDelete);
undoRedo.ExecuteCommand(command);
```

---

### –ë—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞

#### ClipboardService (static)
–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
// –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
ClipboardService.Copy("health", 100);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—Å—Ç–∞–≤–∫–∏
if (ClipboardService.CanPaste("health")) {
    var value = ClipboardService.Paste("health");
    row.SetValue("health", value);
}

// –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
var values = new Dictionary<string, object> {
    { "health", 100 },
    { "damage", 25 },
    { "defense", 10 }
};
ClipboardService.CopyMultiple(values);

// –í—Å—Ç–∞–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
var pastedValues = ClipboardService.PasteMultiple();
foreach (var kvp in pastedValues) {
    row.SetValue(kvp.Key, kvp.Value);
}

// –û—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞
ClipboardService.Clear();
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –±—É—Ñ–µ—Ä–æ–º –æ–±–º–µ–Ω–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤

---

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º–∏

#### TableManager (Singleton)
–ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
var manager = TableManager.Instance;

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
var table = manager.LoadTable("Assets/Data/Characters.asset");

// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
var columns = new List<ColumnDefinition> {
    new ColumnDefinition("id", "ID", ColumnType.String, true),
    new ColumnDefinition("name", "Name", ColumnType.String, true)
};
var newTable = manager.CreateTable("Characters", columns);

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
manager.SaveTable(table);

// –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
manager.DeleteTable(table.TableId);
```

---

## 4. ImportExport - –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ (CSV).

### –≠–∫—Å–ø–æ—Ä—Ç

#### CSVExporter
–≠–∫—Å–ø–æ—Ä—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ CSV —Ñ–æ—Ä–º–∞—Ç.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
var exporter = new CSVExporter();
bool success = exporter.Export(table, "Assets/Export/characters.csv");

if (success) {
    Debug.Log("Table exported successfully!");
}
```

**–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:**
```csv
ID,Name,Level,Health,Damage,IsActive
char_001,Knight,10,100,25,true
char_002,Archer,8,75,30,true
char_003,Mage,12,60,40,false
```

---

### –ò–º–ø–æ—Ä—Ç

#### CSVImporter
–ò–º–ø–æ—Ä—Ç —Ç–∞–±–ª–∏—Ü—ã –∏–∑ CSV —Å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```csharp
var importer = new CSVImporter();

if (importer.CanImport("Assets/Import/data.csv")) {
    var table = importer.Import("Assets/Import/data.csv");
    
    if (table != null) {
        Debug.Log($"Imported {table.Rows.Count} rows");
        Debug.Log($"Columns: {table.Columns.Count}");
    }
}
```

**–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤:**
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä—Å—è—Ç—Å—è –∫–∞–∫ `bool` ‚Üí `ColumnType.Boolean`
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä—Å—è—Ç—Å—è –∫–∞–∫ `int` ‚Üí `ColumnType.Integer`
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä—Å—è—Ç—Å—è –∫–∞–∫ `float` ‚Üí `ColumnType.Float`
- –ò–Ω–∞—á–µ ‚Üí `ColumnType.String`

**–ü—Ä–∏–º–µ—Ä CSV:**
```csv
Name,Level,Experience,IsUnlocked
Hero,10,1500,true
Warrior,5,500,false
Mage,15,3000,true
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `Name`: String
- `Level`: Integer
- `Experience`: Integer
- `IsUnlocked`: Boolean

---

## 5. Editor.UI - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Ç–∞–±–ª–∏—Ü.

### BalanceTableEditorWindow

–ú–æ—â–Ω—ã–π —Ç–∞–±–ª–∏—á–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

#### –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
```
Window ‚Üí BalanceForge ‚Üí Table Editor
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
- Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ (Shift/Ctrl)
- Copy/Paste (Ctrl+C/V)
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ (Delete)

**2. Undo/Redo**
- –û—Ç–º–µ–Ω–∞: `Ctrl+Z` / `‚åò+Z`
- –ü–æ–≤—Ç–æ—Ä: `Ctrl+Y` / `Ctrl+Shift+Z` / `‚åò+Shift+Z`
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- AND/OR –ª–æ–≥–∏–∫–∞
- 7 —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- –ñ–∏–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**
- –ö–ª–∏–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É –∫–æ–ª–æ–Ω–∫–∏
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: None ‚Üí ‚ñ≤ ‚Üí ‚ñº ‚Üí None
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

**5. –í–∞–ª–∏–¥–∞—Ü–∏—è**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—à–∏–±–æ–∫
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**6. –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç**
- CSV —ç–∫—Å–ø–æ—Ä—Ç
- CSV –∏–º–ø–æ—Ä—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è—Ö

#### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –ö–ª–∞–≤–∏—à–∏ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `Ctrl+C` | –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é —è—á–µ–π–∫—É |
| `Ctrl+V` | –í—Å—Ç–∞–≤–∏—Ç—å –≤ —Ñ–æ–∫—É—Å–Ω—É—é —è—á–µ–π–∫—É |
| `Ctrl+Z` | –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ |
| `Ctrl+Y` –∏–ª–∏ `Ctrl+Shift+Z` | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ |
| `Delete` | –£–¥–∞–ª–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ |
| `Click` | –í—ã–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É/—è—á–µ–π–∫—É |
| `Shift+Click` | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ |

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞:**
```csharp
// –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —Å—Ç—Ä–æ–∫–∏ + –±—É—Ñ–µ—Ä
visibleStartIndex = (scrollY - headerHeight) / rowHeight - BUFFER;
visibleEndIndex = (scrollY + viewHeight) / rowHeight + BUFFER;
```

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```csharp
// –ö–µ—à –∑–Ω–∞—á–µ–Ω–∏–π —è—á–µ–µ–∫ (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ñ—Ä–µ–π–º)
Dictionary<string, object> cellValueCache;

// –ö–µ—à GUI –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π, –¥–æ 500 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
Dictionary<string, GUIContent> guiContentCache;
```

**Throttling –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏:**
```csharp
// –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –º–∞–∫—Å–∏–º—É–º –∫–∞–∂–¥—ã–µ 50ms
const float REPAINT_THROTTLE = 0.05f;
```

**–ü—Ä—è–º–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞:**
```csharp
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GUI –≤–º–µ—Å—Ç–æ GUILayout (–±—ã—Å—Ç—Ä–µ–µ –≤ 2-3 —Ä–∞–∑–∞)
GUI.BeginScrollView(...);
EditorGUI.DrawRect(...);
EditorGUI.TextField(...);
GUI.EndScrollView();
```

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ | FPS | –ü–∞–º—è—Ç–∏ |
|------------------|-----|--------|
| 100 | 60 | ~5 MB |
| 1,000 | 60 | ~15 MB |
| 10,000 | 55-60 | ~50 MB |
| 50,000 | 45-55 | ~200 MB |

---

## 6. Editor.Windows - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –æ–∫–Ω–∞

### CreateTableWizard

–ú–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü.

#### –û—Ç–∫—Ä—ã—Ç–∏–µ
```
Assets ‚Üí Create ‚Üí BalanceForge ‚Üí Balance Table Wizard
```

#### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è

**–®–∞–≥ 1: –ò–º—è —Ç–∞–±–ª–∏—Ü—ã**
```
Table Name: [Characters]
```

**–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω–æ–∫**
```
Column 1:
  Name: [ID]
  Type: [String ‚ñº]
  Required: [‚úì]
  
Column 2:
  Name: [Character Name]
  Type: [String ‚ñº]
  Required: [‚úì]
  
Column 3:
  Name: [Level]
  Type: [Integer ‚ñº]
  Required: [‚ñ°]
  
Column 4:
  Name: [Rarity]
  Type: [Enum ‚ñº]
  Required: [‚úì]
  Enum Values:
    - Common
    - Rare
    - Epic
    - Legendary
```

**–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ**
- –ù–∞–∂–∞—Ç—å "Create Table"
- –í—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –¢–∞–±–ª–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

```csharp
using BalanceForge.Core.Data;
using BalanceForge.Services;

public class CharacterTableSetup
{
    public static BalanceTable CreateCharacterTable()
    {
        var table = ScriptableObject.CreateInstance<BalanceTable>();
        table.TableName = "Characters";
        
        // ID –∫–æ–ª–æ–Ω–∫–∞
        var idCol = new ColumnDefinition("id", "ID", ColumnType.String, true);
        idCol.Validator = new RegexValidator(@"^char_\d{3}$");
        table.AddColumn(idCol);
        
        // –ò–º—è
        var nameCol = new ColumnDefinition("name", "Name", ColumnType.String, true);
        table.AddColumn(nameCol);
        
        // –£—Ä–æ–≤–µ–Ω—å
        var levelCol = new ColumnDefinition("level", "Level", ColumnType.Integer, true, 1);
        levelCol.Validator = new RangeValidator(1, 100);
        table.AddColumn(levelCol);
        
        // HP
        var hpCol = new ColumnDefinition("hp", "HP", ColumnType.Integer, true, 100);
        hpCol.Validator = new RangeValidator(1, 10000);
        table.AddColumn(hpCol);
        
        // –†–µ–¥–∫–æ—Å—Ç—å
        var rarityCol = new ColumnDefinition("rarity", "Rarity", ColumnType.Enum, true);
        rarityCol.EnumDefinition.AddValue("Common");
        rarityCol.EnumDefinition.AddValue("Rare");
        rarityCol.EnumDefinition.AddValue("Epic");
        rarityCol.EnumDefinition.AddValue("Legendary");
        table.AddColumn(rarityCol);
        
        // Prefab
        var prefabCol = new ColumnDefinition("prefab", "Prefab", ColumnType.AssetReference);
        prefabCol.SetAssetType(typeof(GameObject));
        table.AddColumn(prefabCol);
        
        return table;
    }
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

```csharp
public static void PopulateCharacterTable(BalanceTable table)
{
    // –†—ã—Ü–∞—Ä—å
    var knight = table.AddRow();
    knight.SetValue("id", "char_001");
    knight.SetValue("name", "Knight");
    knight.SetValue("level", 10);
    knight.SetValue("hp", 500);
    knight.SetValue("rarity", "Common");
    
    // –ú–∞–≥
    var mage = table.AddRow();
    mage.SetValue("id", "char_002");
    mage.SetValue("name", "Mage");
    mage.SetValue("level", 15);
    mage.SetValue("hp", 300);
    mage.SetValue("rarity", "Epic");
    
    // –î—Ä–∞–∫–æ–Ω
    var dragon = table.AddRow();
    dragon.SetValue("id", "char_003");
    dragon.SetValue("name", "Dragon");
    dragon.SetValue("level", 50);
    dragon.SetValue("hp", 5000);
    dragon.SetValue("rarity", "Legendary");
}
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

```csharp
using BalanceForge.Data.Operations;

public class CharacterQueries
{
    // –ù–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —É—Ä–æ–≤–Ω—è 10+
    public static List<BalanceRow> GetHighLevelCharacters(BalanceTable table)
    {
        var filter = new ColumnFilter(new FilterCondition {
            ColumnId = "level",
            Operator = FilterOperator.GreaterThan,
            Value = 10
        });
        
        return filter.Apply(table.Rows);
    }
    
    // –ù–∞–π—Ç–∏ Epic –∏ Legendary –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    public static List<BalanceRow> GetRareCharacters(BalanceTable table)
    {
        var composite = new CompositeFilter(LogicalOperator.Or);
        
        composite.AddFilter(new ColumnFilter(new FilterCondition {
            ColumnId = "rarity",
            Operator = FilterOperator.Equals,
            Value = "Epic"
        }));
        
        composite.AddFilter(new ColumnFilter(new FilterCondition {
            ColumnId = "rarity",
            Operator = FilterOperator.Equals,
            Value = "Legendary"
        }));
        
        return composite.Apply(table.Rows);
    }
    
    // –ù–∞–π—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: —É—Ä–æ–≤–µ–Ω—å > 10 –ò HP > 400
    public static List<BalanceRow> GetStrongCharacters(BalanceTable table)
    {
        var composite = new CompositeFilter(LogicalOperator.And);
        
        composite.AddFilter(new ColumnFilter(new FilterCondition {
            ColumnId = "level",
            Operator = FilterOperator.GreaterThan,
            Value = 10
        }));
        
        composite.AddFilter(new ColumnFilter(new FilterCondition {
            ColumnId = "hp",
            Operator = FilterOperator.GreaterThan,
            Value = 400
        }));
        
        return composite.Apply(table.Rows);
    }
}
```

### –ü—Ä–∏–º–µ—Ä 4: Runtime –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```csharp
public class CharacterLoader : MonoBehaviour
{
    [SerializeField] private BalanceTable characterTable;
    
    void Start()
    {
        LoadCharacters();
    }
    
    void LoadCharacters()
    {
        foreach (var row in characterTable.Rows)
        {
            string id = row.GetValue("id") as string;
            string name = row.GetValue("name") as string;
            int level = (int)row.GetValue("level");
            int hp = (int)row.GetValue("hp");
            string rarity = row.GetValue("rarity") as string;
            
            Debug.Log($"Character: {name} (Lv.{level})");
            Debug.Log($"  ID: {id}");
            Debug.Log($"  HP: {hp}");
            Debug.Log($"  Rarity: {rarity}");
        }
    }
    
    // –ù–∞–π—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ ID
    BalanceRow FindCharacterById(string id)
    {
        foreach (var row in characterTable.Rows)
        {
            if (row.GetValue("id") as string == id)
                return row;
        }
        return null;
    }
    
    // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏
    List<BalanceRow> GetCharactersByRarity(string rarity)
    {
        var result = new List<BalanceRow>();
        
        foreach (var row in characterTable.Rows)
        {
            if (row.GetValue("rarity") as string == rarity)
                result.Add(row);
        }
        
        return result;
    }
}
```

---

## API Reference

### Core API

```csharp
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
var table = ScriptableObject.CreateInstance<BalanceTable>();

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∞–º–∏
table.AddColumn(ColumnDefinition);
table.RemoveColumn(string columnId);
ColumnDefinition col = table.GetColumn(string columnId);

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∞–º–∏
BalanceRow row = table.AddRow();
bool removed = table.RemoveRow(string rowId);
BalanceRow row = table.GetRow(int index);

// –í–∞–ª–∏–¥–∞—Ü–∏—è
ValidationResult result = table.ValidateData();

// –°—Ç—Ä–æ–∫–∏
object value = row.GetValue(string columnId);
row.SetValue(string columnId, object value);
BalanceRow clone = row.Clone();

// –ö–æ–ª–æ–Ω–∫–∏
var col = new ColumnDefinition(id, name, type, required, defaultValue);
col.Validator = IValidator;
bool valid = col.Validate(object value);
```

### Operations API

```csharp
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
var filter = new ColumnFilter(FilterCondition);
var composite = new CompositeFilter(LogicalOperator);
composite.AddFilter(IFilter);
List<BalanceRow> filtered = filter.Apply(List<BalanceRow>);

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
List<BalanceRow> sorted = TableSorter.Sort(
    rows, columnId, direction, columnType
);

var state = new SortingState();
state.Toggle(string columnId);
```

### Services API

```csharp
// –í–∞–ª–∏–¥–∞—Ü–∏—è
IValidator validator = new RangeValidator(min, max);
IValidator validator = new RegexValidator(pattern);
IValidator validator = new RequiredValidator();
bool valid = validator.Validate(object value);

// Undo/Redo
var service = new UndoRedoService();
service.ExecuteCommand(ICommand);
service.Undo();
service.Redo();
bool canUndo = service.CanUndo();
bool canRedo = service.CanRedo();

// Commands
var cmd = new AddRowCommand(table, row);
var cmd = new EditCellCommand(table, rowId, columnId, oldVal, newVal);
var cmd = new DeleteRowCommand(table, row);
var cmd = new MultiDeleteCommand(table, List<BalanceRow>);

// Clipboard
ClipboardService.Copy(columnId, value);
ClipboardService.CopyMultiple(Dictionary<string, object>);
bool canPaste = ClipboardService.CanPaste(columnId);
object value = ClipboardService.Paste(columnId);

// Table Manager
var manager = TableManager.Instance;
BalanceTable table = manager.LoadTable(assetPath);
manager.SaveTable(table);
BalanceTable table = manager.CreateTable(name, columns);
bool deleted = manager.DeleteTable(tableId);
```

### ImportExport API

```csharp
// –≠–∫—Å–ø–æ—Ä—Ç
var exporter = new CSVExporter();
bool success = exporter.Export(table, filePath);

// –ò–º–ø–æ—Ä—Ç
var importer = new CSVImporter();
bool canImport = importer.CanImport(filePath);
BalanceTable table = importer.Import(filePath);
```

---

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

```csharp
using BalanceForge.Services;

public class EmailValidator : IValidator
{
    private static readonly Regex EmailRegex = new Regex(
        @"^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$",
        RegexOptions.Compiled
    );
    
    public bool Validate(object value)
    {
        if (value == null) return false;
        return EmailRegex.IsMatch(value.ToString());
    }
    
    public string GetErrorMessage()
    {
        return "Invalid email format";
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
var emailColumn = new ColumnDefinition("email", "Email", ColumnType.String, true);
emailColumn.Validator = new EmailValidator();
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞

```csharp
using BalanceForge.Data.Operations;

public class RarityTierFilter : IFilter
{
    private int minTier;
    
    public RarityTierFilter(int minTier)
    {
        this.minTier = minTier;
    }
    
    public List<BalanceRow> Apply(List<BalanceRow> rows)
    {
        return rows.Where(row => {
            string rarity = row.GetValue("rarity") as string;
            int tier = GetRarityTier(rarity);
            return tier >= minTier;
        }).ToList();
    }
    
    private int GetRarityTier(string rarity)
    {
        return rarity switch {
            "Common" => 1,
            "Rare" => 2,
            "Epic" => 3,
            "Legendary" => 4,
            _ => 0
        };
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
var filter = new RarityTierFilter(minTier: 3); // Epic –∏ –≤—ã—à–µ
var filtered = filter.Apply(table.Rows);
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞

```csharp
using BalanceForge.ImportExport;
using System.Xml;

public class XMLExporter : IExporter
{
    public bool Export(BalanceTable table, string filePath)
    {
        try
        {
            var doc = new XmlDocument();
            var root = doc.CreateElement("BalanceTable");
            root.SetAttribute("name", table.TableName);
            doc.AppendChild(root);
            
            // –ö–æ–ª–æ–Ω–∫–∏
            var columnsNode = doc.CreateElement("Columns");
            foreach (var col in table.Columns)
            {
                var colNode = doc.CreateElement("Column");
                colNode.SetAttribute("id", col.ColumnId);
                colNode.SetAttribute("name", col.DisplayName);
                colNode.SetAttribute("type", col.DataType.ToString());
                columnsNode.AppendChild(colNode);
            }
            root.AppendChild(columnsNode);
            
            // –°—Ç—Ä–æ–∫–∏
            var rowsNode = doc.CreateElement("Rows");
            foreach (var row in table.Rows)
            {
                var rowNode = doc.CreateElement("Row");
                rowNode.SetAttribute("id", row.RowId);
                
                foreach (var col in table.Columns)
                {
                    var cellNode = doc.CreateElement("Cell");
                    cellNode.SetAttribute("column", col.ColumnId);
                    cellNode.InnerText = row.GetValue(col.ColumnId)?.ToString() ?? "";
                    rowNode.AppendChild(cellNode);
                }
                
                rowsNode.AppendChild(rowNode);
            }
            root.AppendChild(rowsNode);
            
            doc.Save(filePath);
            return true;
        }
        catch
        {
            return false;
        }
    }
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–ª–æ–Ω–∫–∏

```csharp
// 1. –î–æ–±–∞–≤–∏—Ç—å –≤ enum
public enum ColumnType
{
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã
    DateTime,  // –ù–û–í–´–ô –¢–ò–ü
}

// 2. –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ ColumnDefinition
private string SerializeValue(object value)
{
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–ª—É—á–∞–∏
    
    if (value is System.DateTime dt)
        return dt.ToString("o"); // ISO 8601
    
    return value.ToString();
}

private object DeserializeValue(string serialized)
{
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–ª—É—á–∞–∏
    
    case ColumnType.DateTime:
        return System.DateTime.Parse(serialized);
}

// 3. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
private object DrawCellByType(Rect position, ColumnDefinition column, object value)
{
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–ª—É—á–∞–∏
    
    case ColumnType.DateTime:
        System.DateTime dt = value is System.DateTime ? (System.DateTime)value : System.DateTime.Now;
        string dateStr = EditorGUI.TextField(position, dt.ToString("yyyy-MM-dd HH:mm:ss"));
        if (System.DateTime.TryParse(dateStr, out System.DateTime newDt))
            return newDt;
        return dt;
}
```

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞**
   - –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —Å—Ç—Ä–æ–∫–∏
   - –ë—É—Ñ–µ—Ä ¬±5 —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ó–Ω–∞—á–µ–Ω–∏—è —è—á–µ–µ–∫ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Ñ—Ä–µ–π–º
   - GUI –∫–æ–Ω—Ç–µ–Ω—Ç –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–µ—à–∞: 500 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

3. **–ü—Ä—è–º–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GUI –≤–º–µ—Å—Ç–æ GUILayout
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 2-3 —Ä–∞–∑–∞

4. **Throttling**
   - –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –º–∞–∫—Å–∏–º—É–º –∫–∞–∂–¥—ã–µ 50ms
   - –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ CPU

5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**
   - Array.Sort –≤–º–µ—Å—Ç–æ LINQ OrderBy
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 3-5 —Ä–∞–∑

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–í–µ—Ä—Å–∏—è Unity 2022+
